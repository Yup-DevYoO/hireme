<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Lobster&display=swap" rel="stylesheet">

</head>
<body>
    <style>body, input , select{font-family: 'Lato', sans-serif;font-weight: bold!important;}.text-right{text-align: right;}.px-10{padding-left:10%;padding-right:10%;}.cursive{font-family: 'Lobster', cursive;} @media(max-width:500px){.px-10{padding-left:5px;padding-right:5px;}}</style>
<!-- 
    <iframe height="435px" src="https://potri.in/index1" width="100%"></iframe> -->


    <section class="px-10 py-3">
    <!-- <form class="row px-3 m-0">
         -->
        <h4 class="cursive text-danger px-3">calculate the coffee-water ratio</h4>
        <div class="row m-0 py-3">
            
          <label for="inputratio" class="col-4">Ratio (coffee:Water)</label>
          <div class="col-8"><select id="inputratio" class="form-select"  onchange="CoffeeChangeByInput('ratioInput',this.value)">
            <option id="0">1:13</option><option id="1">1:14</option><option id="2">1:15</option><option id="3" selected>1:16</option><option id="4">1:17</option><option id="5">1:18</option><option id="6">1:19</option>
          </select></div>
          
        </div>


        <!-- Water -->
        <div class="row m-0 py-3">
          <label for="inputwater" class="col-4">Water</label>
          <div class="col-4">
              <input type="number" class="form-control" id="inputwater" value="80" onkeyUp="CoffeeChangeByInput('waterInput',this.value)">
        </div>
          <div class="col-4">
              <select id="waterSelect" class="form-select col-4" onfocus="this.oldValue = this.value;" onchange="myFunction2('waterSelect',this.value, this.oldValue);this.oldValue = this.value;">
                <option selected>Milliliters</option><option>Ounces</option><option>Cups</option><option id="3">Quarts</option><option>Liters</option><option>Gallon</option>
                </select>
            </div>
        </div>


        <!-- groundcoffee -->
        <div class="row m-0 py-3">
            <label for="inputgcoffee" class="col-4">Ground Coffee</label>
            <div class="col-4"><input type="number" class="form-control" id="inputgcoffee" value="5" onkeyUp="CoffeeChangeByInput('gcInput',this.value)"></div>
            <div class="col-4"><select id="gcoffeeSelect" class="form-select col-4" onfocus="this.oldValue = this.value;" onchange="myFunction2('gcoffeeSelect',this.value, this.oldValue);this.oldValue = this.value;">
                <option selected>Grams</option><option>Ounces</option><option>Tablespoons</option><option>Cups</option><option id="3">Kilos</option><option>Pounds</option>
              </select>
            </div>
        </div>

    <!-- Brewed coffee -->
        <div class="row m-0 py-3">
            <label for="inputBcoffee" class="col-4">Brewed Coffee</label>
            <div class="col-4"><input type="number" class="form-control" id="inputBcoffee" value="70.03" onkeyUp="CoffeeChangeByInput('bcInput',this.value)"></div>
            <div class="col-4"><select id="bcoffeeSelect" class="form-select col-4" onfocus="this.oldValue = this.value;" onchange="myFunction2('bcoffeeSelect',this.value, this.oldValue);this.oldValue = this.value;">
                <option selected>Milliliters</option><option>Ounces</option><option>Cups</option><option id="3">Quarts</option><option>Liters</option><option>Gallon</option>
              </select>
            </div>
        </div>

<div class="row m-0 pt-3 justify-content-between">
    <div class="col">Weak</div>
    <div class="col text-center">Medium</div>
    <div class="col text-right">Strong</div>
</div>
<input type="range" class="form-range col-4" onchange="CoffeeChangeByInput('rangeInput',this.value)" min="0" max="6" value="3" id="customRange">

</section>
<script> 
const liqPar = {Milliliters:1,Liters:1000,Gallon:3785.41,Quarts:946.353,Cups:236.588,Ounces:29.5735}
const solPar = {Grams:1,Ounces:28.34952,Cups:112,Kilos:1000,Pounds:453.592,Tablespoons:7}
const cofficient={'1:13':13,"1:14":14,'1:15':15,'1:16':16,'1:17':17,'1:18':18,'1:19':19}
const rangeCof={'1:13':0,"1:14":1,'1:15':2,'1:16':3,'1:17':4,'1:18':5,'1:19':6}

var ir =  document.getElementById("inputratio");
const r = document.getElementById('customRange');
const gc = document.getElementById('inputgcoffee');
const bc  = document.getElementById('inputBcoffee');
const w = document.getElementById('inputwater');

const ws =  document.getElementById("waterSelect");
const gcs = document.getElementById("gcoffeeSelect");
const bcs = document.getElementById("bcoffeeSelect");

function mathFunction(whatfor,oldValue,value){

    if(whatfor=="sol"){
        var y = solPar[oldValue];
        var x = solPar[value];
        return x/y;
    }else if(whatfor=="liq"){
        var y = liqPar[oldValue];
        var x = liqPar[value];
        return x/y;
    }
}

function getKeyByValue(object, value) { 
    for (var prop in object) { 
        if (object.hasOwnProperty(prop)) { 
            if (object[prop] == value){
                return prop; 
            }
        } 
    } 
}

function myFunction2(type,value,oldValue){

    if (type=="waterSelect"){
        var mf = mathFunction('liq',oldValue,value);
        CoffeeChange(mf,gc);
        CoffeeChange(mf,bc);
    }else if(type=="bcoffeeSelect"){
        var mf = mathFunction('liq',oldValue,value);
        CoffeeChange(mf,w);
        CoffeeChange(mf,gc);
    }else if(type=="gcoffeeSelect"){
        var mf = mathFunction('sol',oldValue,value);
        CoffeeChange(mf,w);
        CoffeeChange(mf,bc);
    }
}

function CoffeeChange(mf,changingKey){
    changingKey.value = (changingKey.value * mf).toFixed(2);
}

function CoffeeChangeByInput(whatfor,val){
    if (whatfor == "waterInput"){
        gc.value = (val / cofficient[ir.value] * liqPar[ws.value]/solPar[gcs.value]).toFixed(2);

        bc.value = ((liqPar[ws.value]*val - (1.995*val*liqPar[ws.value]/cofficient[ir.value]))/liqPar[bcs.value]).toFixed(2);

    }else if(whatfor=="gcInput"){
        w.value = (val * cofficient[ir.value] * solPar[gcs.value]/liqPar[ws.value]).toFixed(2);
        bc.value = ((liqPar[ws.value]*w.value - (1.995*w.value*liqPar[ws.value]/cofficient[ir.value]))/liqPar[bcs.value]).toFixed(2);
        
    }else if(whatfor=="bcInput"){
        w.value = (val*liqPar[bcs.value]*cofficient[ir.value]/((cofficient[ir.value]-1.995)*liqPar[ws.value])).toFixed(2);
        gc.value = (w.value / cofficient[ir.value] * liqPar[ws.value]/solPar[gcs.value]).toFixed(2);
    }else if(whatfor=="ratioInput"){
        gc.value = (w.value / cofficient[ir.value] * liqPar[ws.value]/solPar[gcs.value]).toFixed(2);

        bc.value = ((liqPar[ws.value]*w.value - (1.995*w.value*liqPar[ws.value]/cofficient[ir.value]))/liqPar[bcs.value]).toFixed(2);

        r.value = rangeCof[val];
    }else if(whatfor=="rangeInput"){
        var x = getKeyByValue(rangeCof,val);
        ir.value=x;
        gc.value = (w.value / cofficient[ir.value] * liqPar[ws.value]/solPar[gcs.value]).toFixed(2);

        bc.value = ((liqPar[ws.value]*w.value - (1.995*w.value*liqPar[ws.value]/cofficient[ir.value]))/liqPar[bcs.value]).toFixed(2);
    }
}

</script>

</body>
</html>